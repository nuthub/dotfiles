;; wireplumber service
(use-modules (shepherd support))

(define wireplumber
  (service
   '(wireplumber)
   #:documentation "Run `wireplumber'"
   #:requirement '(pipewire)
   #:start (lambda ()
             (fork+exec-command
              `("wireplumber")
	      #:log-file (string-append %user-log-dir "/wireplumber.log")
	      #:environment-variables '("DISPLAY=:0")))
   #:stop (make-kill-destructor)
   #:respawn? #t))

(register-services (list wireplumber))
(start-service wireplumber)
